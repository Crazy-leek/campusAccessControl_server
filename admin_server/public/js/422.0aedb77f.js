"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[422],{3422:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("el-card",{staticClass:"card-box"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",{staticStyle:{"font-size":"16pt"}},[e._v("管理员登录")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.goRegister}},[e._v("点击注册")]),t("span",{staticStyle:{float:"right",padding:"0 2px"}},[e._v("没有账号?")])],1),t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px","label-position":"left"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm",t)}}},[t("el-form-item",{attrs:{label:"账号",prop:"account"}},[t("el-input",{attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account","string"===typeof t?t.trim():t)},expression:"ruleForm.account"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入密码","show-password":"",autocomplete:"off",clearable:""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password","string"===typeof t?t.trim():t)},expression:"ruleForm.password"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")]),t("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},s=[],l=(r(7658),r(7877)),a={name:"Login",data(){var e=(e,t,r)=>t?t.length<6?r(new Error("请输入至少6位密码")):void r():r(new Error("密码不能为空"));return{ruleForm:{password:"",account:""},rules:{password:[{validator:e,trigger:"blur",required:!0}],account:[{message:"账号不能为空",trigger:"blur",required:!0}]}}},beforeMount(){this.$store.state.token&&this.$router.replace("/home")},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;this.goLogin(this.ruleForm)}))},resetForm(e){this.$refs[e].resetFields()},async goLogin(e){const t=await l.Z.login(e).catch((()=>{}));200==t.code?(this.$message.success("登录成功"),localStorage.setItem("token",t.token),this.$store.commit("CHANGETOKEN",t.token),this.$router.replace("/home")):this.$message.error(t.message)},goRegister(){this.$router.push("/welcome/register")}}},i=a,n=r(1001),u=(0,n.Z)(i,o,s,!1,null,null,null),c=u.exports}}]);
//# sourceMappingURL=422.0aedb77f.js.map