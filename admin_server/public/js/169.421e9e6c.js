"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[169],{9169:function(e,s,t){t.r(s),t.d(s,{default:function(){return c}});var a=function(){var e=this,s=e._self._c;return s("div",{staticClass:"userInfo"},[s("div",{staticClass:"left"},[s("el-card",{staticStyle:{height:"440px"}},[s("div",{staticClass:"admin"},[e._v("超级管理员")]),s("div",{staticClass:"pic"},[s("el-avatar",{attrs:{size:200,src:e.info.pic||"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1),s("span",{staticClass:"line"}),s("div",{staticClass:"base-info"},[s("div",[s("i",[e._v("昵称：")]),s("div",[e._v(e._s(e.info.name))])]),s("div",[s("i",[e._v("邮箱：")]),s("div",[e._v(" "+e._s(e.info.email||"暂未设置")+" ")])])])])],1),s("div",{staticClass:"right"},[s("el-card",[s("el-collapse",{attrs:{accordion:""}},[s("el-collapse-item",[s("template",{slot:"title"},[s("h5",[e._v("基本信息修改")]),s("i",{staticClass:"header-icon el-icon-postcard"})]),s("div",[s("el-form",{ref:"emailForm",attrs:{"label-position":"left",model:e.emailForm,inline:!0,"label-width":"80px"}},[s("el-form-item",{attrs:{prop:"email",label:"新邮箱",rules:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.emailForm.email,callback:function(s){e.$set(e.emailForm,"email",s)},expression:"emailForm.email"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.subEmail("emailForm")}}},[e._v("提交")]),s("el-button",{on:{click:function(s){return e.resetForm("emailForm")}}},[e._v("清空")])],1)],1),s("el-form",{ref:"nicknameForm",attrs:{"label-position":"left",model:e.nicknameForm,inline:!0,"label-width":"80px"}},[s("el-form-item",{attrs:{prop:"name",label:"新昵称",rules:[{required:!0,message:"请输入昵称",trigger:["blur","change"]}]}},[s("el-input",{attrs:{placeholder:"请输入昵称","auto-complete":"off"},model:{value:e.nicknameForm.name,callback:function(s){e.$set(e.nicknameForm,"name",s)},expression:"nicknameForm.name"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.subNickname("nicknameForm")}}},[e._v("提交")]),s("el-button",{on:{click:function(s){return e.resetForm("nicknameForm")}}},[e._v("清空")])],1)],1)],1)],2),s("el-collapse-item",[s("template",{slot:"title"},[s("h5",[e._v("密码修改")]),s("i",{staticClass:"header-icon el-icon-key"})]),s("div",[s("el-form",{ref:"passForm",attrs:{"label-position":"left",model:e.passForm,rules:e.passRules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"原密码",prop:"oldPwd"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入原密码"},model:{value:e.passForm.oldPwd,callback:function(s){e.$set(e.passForm,"oldPwd",s)},expression:"passForm.oldPwd"}})],1),s("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入新密码",autocomplete:"off"},model:{value:e.passForm.newPwd,callback:function(s){e.$set(e.passForm,"newPwd",s)},expression:"passForm.newPwd"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{type:"password",placeholder:"请再次新输入密码",autocomplete:"off"},model:{value:e.passForm.checkPass,callback:function(s){e.$set(e.passForm,"checkPass",s)},expression:"passForm.checkPass"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.alterPwd("passForm")}}},[e._v("修改")]),s("el-button",{on:{click:function(s){return e.resetForm("passForm")}}},[e._v("清空")])],1)],1)],1)],2)],1)],1)],1)])},r=[],o=t(7877),i={name:"userInfo",data(){let e=(e,s,t)=>{""===s?t(new Error("请输入密码")):s.length<6?t(new Error("请输入至少6位密码")):(""!==this.passForm.checkPass&&this.$refs.passForm.validateField("checkPass"),t())},s=(e,s,t)=>{""===s?t(new Error("请再次输入密码")):s!=this.passForm.newPwd?t(new Error("两次输入密码不一致!")):t()};return{emailForm:{email:""},passForm:{oldPwd:"",newPwd:"",checkPass:""},headPortraitForm:{pic:""},nicknameForm:{name:""},passRules:{oldPwd:[{validator:e,trigger:"blur",required:!0}],newPwd:[{validator:e,trigger:"blur",required:!0}],checkPass:[{validator:s,trigger:"blur",required:!0}]}}},methods:{subEmail(e){this.$refs[e].validate((e=>{e?this.goUpEmail(this.emailForm):console.log("error submit!!")}))},alterPwd(e){this.$refs[e].validate((e=>{e?this.goUpPass(this.passForm):console.log("error submit!!")}))},subNickname(e){this.$refs[e].validate((e=>{e?this.goUpNickname(this.nicknameForm):console.log("error submit!!")}))},resetForm(e){this.$refs[e].resetFields()},async goUpEmail(e){const s=await o.Z.upEmail(e).catch((e=>{}));200==s.code?(this.$store.dispatch("getUserInfo"),this.$message.success(s.message),this.resetForm("emailForm")):this.$message.error(s.message)},async goUpPass(e){const s=await o.Z.upPwd(e).catch((()=>{}));200==s.code?(this.$message.success(s.message),this.resetForm("passForm")):this.$message.error(s.message)},async goUpNickname(e){const s=await o.Z.upNickname(e).catch((e=>{}));200==s.code?(this.$store.dispatch("getUserInfo"),this.$message.success(s.message),this.resetForm("nicknameForm")):this.$message.error(s.message)}},computed:{info:function(){return this.$store.state.userInfo}}},l=i,m=t(1001),n=(0,m.Z)(l,a,r,!1,null,"04eaea7a",null),c=n.exports}}]);
//# sourceMappingURL=169.421e9e6c.js.map